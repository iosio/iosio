const e=/____EXPR_ID_(\d+)____/g,s={tag:"minify",replace:""};module.exports=function({types:n}){return{visitor:{TaggedTemplateExpression(r,{opts:t}){if(t=Object.assign({},s,t),r.node.tag.name!==t.tag)return;t.replace&&(r.node.tag.name=t.replace);let a=r.node.quasi.expressions,i=function(s){let n=e.exec(s),r=[];for(;n;)r.push(n),n=e.exec(s);let t=r.reduce((e,n)=>{let[r,t]=n;return e.quasis.push(s.substring(e.prevEnd,n.index)),e.exprs.push(t),e.prevEnd=n.index+r.length,e},{prevEnd:0,quasis:[],exprs:[]});return t.quasis.push(s.substring(t.prevEnd,s.length)),{quasis:t.quasis,exprs:t.exprs}}(r.node.quasi.quasis.reduce((e,s,n)=>{let r=a[n]?function(e){return`____EXPR_ID_${e}____`}(n):"";return e+s.value.raw+r},"").split("\n").join(" ").replace(/  +/g," ")),u=function(e,s){return s.map((n,r)=>e.templateElement({raw:n,cooked:n},r===s.length-1))}(n,i.quasis),p=i.exprs.map(e=>a[e]);r.node.quasi.quasis=u,r.node.quasi.expressions=p,r.replaceWith(n.TemplateLiteral(u,p))}}}};
